<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>随机提示音</title>
  <!-- 引入Google Fonts的Poppins字体 -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <!-- 链接到样式文件 -->
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <!-- 主容器 -->
  <div class="app-container">
    <!-- 应用标题 -->
    <h1>随机提示音</h1>

    <!-- 计时器显示容器 -->
    <div class="timers-container">
      <!-- 主计时器卡片 -->
      <div class="timer-card">
        <h3>主流程</h3>
        <h2 id="main-timer-display">90:00</h2>
      </div>

      <!-- 随机计时器卡片 -->
      <div class="timer-card">
        <h3>随机间隔</h3>
        <h2 id="random-timer-display">--:--</h2>
      </div>

      <!-- 10秒计时器卡片（初始隐藏） -->
      <div class="timer-card hidden" id="ten-second-timer-card">
        <h3>准备</h3>
        <h2 id="ten-second-timer-display">10</h2>
      </div>
    </div>

    <!-- 控制按钮容器 -->
    <div class="controls-container">
      <button id="start-button">开始</button>
      <button id="reset-button" disabled>重置</button>
      <button id="rest-mode-button" class="rest-mode-btn">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 17H2L8 6h8l6 11z"></path>
          <path d="M9 22h6"></path>
          <path d="M12 16v6"></path>
        </svg>
        智能休息
      </button>
      <button id="settings-button" class="settings-btn">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"></circle>
          <path
            d="M12 1v6m0 6v6m4.22-10.22l4.24-4.24M6.34 17.66l4.24 4.24M1 12h6m6 0h6m-10.22 4.22l-4.24 4.24M17.66 6.34l4.24-4.24">
          </path>
        </svg>
        设置
      </button>
    </div>

    <!-- 疲劳度指示器 -->
    <div class="fatigue-indicator">
      <h3>疲劳度监测检测</h3>
      <div class="fatigue-bar-container">
        <div class="fatigue-bar" id="fatigue-bar">
          <div class="fatigue-fill" id="fatigue-fill"></div>
        </div>
        <span class="fatigue-text" id="fatigue-text">正常 (0%)</span>
      </div>
    </div>
  </div>

  <!-- 休息模式界面 -->
  <div id="rest-mode-overlay" class="rest-mode-overlay hidden">
    <div class="rest-mode-container">
      <!-- 休息模式头部 -->
      <div class="rest-mode-header">
        <h2>智能休息时间</h2>
        <button class="rest-mode-close" id="rest-mode-close">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <!-- 休息倒计时 -->
      <div class="rest-timer-display">
        <h3>休息倒计时</h3>
        <div class="rest-timer" id="rest-timer">05:00</div>
      </div>

      <!-- 疲劳度指示器（休息模式中） -->
      <div class="rest-fatigue-display">
        <h4>当前疲劳度</h4>
        <div class="rest-fatigue-circle" id="rest-fatigue-circle">
          <div class="fatigue-percentage" id="rest-fatigue-percentage">0%</div>
          <div class="fatigue-status" id="rest-fatigue-status">正常</div>
        </div>
      </div>

      <!-- 休息活动建议 -->
      <div class="rest-activity-container">
        <h3>建议的休息活动</h3>
        <div class="activity-card" id="current-activity">
          <div class="activity-icon" id="activity-icon">🧘‍♀️</div>
          <div class="activity-content">
            <h4 id="activity-title">深呼吸练习</h4>
            <p id="activity-description">放松身心，缓解压力</p>
            <div class="activity-steps" id="activity-steps">
              <div class="step">1. 坐直身体，闭上眼睛</div>
              <div class="step">2. 缓慢深呼吸4秒</div>
              <div class="step">3. 屏住呼吸4秒</div>
              <div class="step">4. 缓慢呼气4秒</div>
            </div>
          </div>
        </div>

        <!-- 活动切换按钮 -->
        <div class="activity-controls">
          <button class="activity-btn" id="prev-activity">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="15,18 9,12 15,6"></polyline>
            </svg>
            上一个
          </button>
          <button class="activity-btn" id="next-activity">
            下一个
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9,18 15,12 9,6"></polyline>
            </svg>
          </button>
        </div>
      </div>

      <!-- 休息动画显示区域 -->
      <div class="rest-animation-container">
        <div class="breathing-animation" id="breathing-animation">
          <div class="breath-circle"></div>
          <div class="breath-text">跟随呼吸</div>
        </div>
      </div>

      <!-- 休息控制按钮 -->
      <div class="rest-controls">
        <button class="rest-control-btn" id="rest-music-toggle">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 18V5l12-2v13"></path>
            <circle cx="6" cy="18" r="3"></circle>
            <circle cx="18" cy="16" r="3"></circle>
          </svg>
          舒缓音乐
        </button>
        <button class="rest-control-btn" id="rest-brightness-toggle">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
          调节亮度
        </button>
        <button class="rest-control-btn" id="custom-duration">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12,6 12,12 16,14"></polyline>
          </svg>
          自定义时长
        </button>
      </div>
    </div>
  </div>

  <!-- 设置模态框 -->
  <div id="settings-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>设置</h2>
        <button class="close-button" id="close-settings">&times;</button>
      </div>
      <div class="modal-body">
        <!-- 主流程时间设置 -->
        <div class="setting-group">
          <label for="main-duration">主流程时间（分钟）：</label>
          <input type="number" id="main-duration" min="1" max="180" value="90">
          <span class="setting-description">设置主流程的总时长</span>
        </div>

        <!-- 随机间隔时间设置 -->
        <div class="setting-group">
          <label>随机间隔时间区间（分钟）：</label>
          <div class="range-inputs">
            <input type="number" id="random-min" min="1" max="30" value="3" step="0.5">
            <span>至</span>
            <input type="number" id="random-max" min="1" max="30" value="5" step="0.5">
          </div>
          <span class="setting-description">设置随机间隔的时间范围</span>
        </div>

        <!-- 休息时间设置 -->
        <div class="setting-group">
          <label for="rest-duration">休息时间（秒）：</label>
          <input type="number" id="rest-duration" min="5" max="60" value="10">
          <span class="setting-description">设置每次间隔后的休息时长</span>
        </div>

        <!-- 疲劳度设置 -->
        <div class="setting-group">
          <label for="fatigue-threshold">疲劳度阈值（%）：</label>
          <input type="number" id="fatigue-threshold" min="50" max="90" value="70" step="5">
          <span class="setting-description">达到此疲劳度时会主动建议休息</span>
        </div>

        <!-- 专注时长权重设置 -->
        <div class="setting-group">
          <label for="focus-weight">专注时长权重：</label>
          <input type="range" id="focus-weight" min="0.5" max="2" value="1" step="0.1">
          <span class="setting-description">专注时长对疲劳度的影响权重 (当前: <span id="focus-weight-value">1.0</span>)</span>
        </div>

        <!-- 默认休息时长设置 -->
        <div class="setting-group">
          <label for="default-rest-duration">默认智能休息时长（分钟）：</label>
          <input type="number" id="default-rest-duration" min="3" max="15" value="5">
          <span class="setting-description">进入智能休息模式的默认时长</span>
        </div>

        <!-- 休息偏好设置 -->
        <div class="setting-group">
          <label>休息活动偏好：</label>
          <div class="checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" id="pref-breathing" checked>
              <span>呼吸练习</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="pref-stretching" checked>
              <span>伸展运动</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="pref-eye-care" checked>
              <span>护眼休息</span>
            </label>
          </div>
          <span class="setting-description">选择您偏好的休息活动类型</span>
        </div>
      </div>
      <div class="modal-footer">
        <button id="save-settings" class="btn-primary">保存</button>
        <button id="cancel-settings" class="btn-secondary">取消</button>
      </div>
    </div>
  </div>

  <!-- 引入countdown.js库 -->
  <script src="https://cdn.jsdelivr.net/npm/countdown@2.6.0/countdown.min.js"></script>
  <!-- 引入本地脚本 -->
  <script src="script.js"></script>
</body>

</html>